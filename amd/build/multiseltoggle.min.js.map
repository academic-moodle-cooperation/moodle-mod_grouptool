{"version":3,"file":"multiseltoggle.min.js","sources":["../src/multiseltoggle.js"],"sourcesContent":["// This file is part of mod_grouptool for Moodle - http://moodle.org/\n//\n// It is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// It is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for toggling between multi-selects and single-selects\n *\n * @module   mod_grouptool/multiseltoggle\n * @author    Philipp Hager\n * @copyright 2018 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n /**\n  * @module mod_grouptool/multiseltoggle\n  */\ndefine(['jquery', 'core/str', 'core/log'], function($, str, log) {\n\n    var PLUS = 'fa-plus'; // Alternatives: 'fa-plus-square' or 'fa-plus-square-o'!\n    var MINUS = 'fa-minus'; // Alternatives: 'fa-minus-square' or 'fa-minus-square-o'!\n    var COLOR = 'text-primary'; // Alternatives: 'text-info', 'text-muted', '', etc. (Every bootstrap text-color-class)!\n\n    /**\n     * @constructor\n     * @alias module:mod_grouptool/multiseltoggle\n     */\n    var MultiSelToggle = function() {\n        this.selectmultiple = '';\n        this.selectsingle = '';\n        this.el = {};\n    };\n\n    /**\n     * Change the select field from multi select to single select or vice versa!\n     *\n     * @param {Event} e Event object\n     */\n    MultiSelToggle.prototype.toggle = function(e) {\n        var x = e.currentTarget;\n        if (instance.el.multiple) {\n            // Remove multiple and set icon classes to [+]!\n            instance.el.multiple = false;\n            x.classList.replace(MINUS, PLUS);\n            x.title = instance.selectmultiple;\n        } else {\n            // Add multiple and set icon classes to [-]!\n            instance.el.multiple = true;\n            x.classList.replace(PLUS, MINUS);\n            x.title = instance.selectsingle;\n        }\n    };\n\n    var instance = new MultiSelToggle();\n\n    /**\n     * Initializer\n     *\n     * @param {string|element} el Element selector to enable switch for.\n     */\n    instance.enable = function(el) {\n        instance.el = el;\n        var stringstofetch = [\n            {'key': 'selectmultiple', 'component': 'mod_grouptool'},\n            {'key': 'selectsingle', 'component': 'mod_grouptool'}\n        ];\n        str.get_strings(stringstofetch).done(function(s) {\n            instance.selectmultiple = s[0];\n            instance.selectsingle = s[1];\n            log.info('Enable multiselect/singleselect switch for element (' + instance.el + ').', 'grouptool');\n            if (typeof instance.el === 'string') {\n                log.info('Get element by selector (' + instance.el + ')', 'grouptool');\n                instance.el = document.querySelector(instance.el);\n            }\n            if (instance.el !== null && typeof instance.el === 'object') {\n                var icon = document.createElement('i');\n                icon.classList.add('fa');\n                icon.classList.add('p-r-1');\n                icon.classList.add(COLOR);\n                if (instance.el.multiple) {\n                    icon.title = instance.selectsingle;\n                    icon.classList.add(MINUS);\n                } else {\n                    icon.title = instance.selectmultiple;\n                    icon.classList.add(PLUS);\n                }\n                instance.el.parentNode.insertBefore(icon, instance.el.nextSibling);\n                icon.style.cursor = 'pointer';\n                icon.style.height = '100%';\n                icon.style.paddingLeft = '2px';\n                icon.addEventListener(\"click\", instance.toggle);\n            } else {\n                log.error('Element to enable multiselect/singleselect switch was not found!', 'grouptool');\n            }\n        });\n    };\n\n    return instance;\n});\n"],"names":["define","$","str","log","MultiSelToggle","selectmultiple","selectsingle","el","prototype","toggle","e","x","currentTarget","instance","multiple","classList","replace","title","enable","get_strings","done","s","info","document","querySelector","_typeof","icon","createElement","add","parentNode","insertBefore","nextSibling","style","cursor","height","paddingLeft","addEventListener","error"],"mappings":";;;;;;;;IA2BAA,sCAAO,CAAC,SAAU,WAAY,aAAa,SAASC,EAAGC,IAAKC,SAUpDC,eAAiB,gBACZC,eAAiB,QACjBC,aAAe,QACfC,GAAK,IAQdH,eAAeI,UAAUC,OAAS,SAASC,OACnCC,EAAID,EAAEE,cACNC,SAASN,GAAGO,UAEZD,SAASN,GAAGO,UAAW,EACvBH,EAAEI,UAAUC,QAvBR,WADD,WAyBHL,EAAEM,MAAQJ,SAASR,iBAGnBQ,SAASN,GAAGO,UAAW,EACvBH,EAAEI,UAAUC,QA7BT,UACC,YA6BJL,EAAEM,MAAQJ,SAASP,mBAIvBO,SAAW,IAAIT,sBAOnBS,SAASK,OAAS,SAASX,IACvBM,SAASN,GAAKA,GAKdL,IAAIiB,YAJiB,CACjB,KAAQ,2BAA+B,iBACvC,KAAQ,yBAA6B,mBAETC,MAAK,SAASC,MAC1CR,SAASR,eAAiBgB,EAAE,GAC5BR,SAASP,aAAee,EAAE,GAC1BlB,IAAImB,KAAK,uDAAyDT,SAASN,GAAK,KAAM,aAC3D,iBAAhBM,SAASN,KAChBJ,IAAImB,KAAK,4BAA8BT,SAASN,GAAK,IAAK,aAC1DM,SAASN,GAAKgB,SAASC,cAAcX,SAASN,KAE9B,OAAhBM,SAASN,IAAsC,WAAvBkB,QAAOZ,SAASN,IAAiB,KACrDmB,KAAOH,SAASI,cAAc,KAClCD,KAAKX,UAAUa,IAAI,MACnBF,KAAKX,UAAUa,IAAI,SACnBF,KAAKX,UAAUa,IAzDf,gBA0DIf,SAASN,GAAGO,UACZY,KAAKT,MAAQJ,SAASP,aACtBoB,KAAKX,UAAUa,IA7DnB,cA+DIF,KAAKT,MAAQJ,SAASR,eACtBqB,KAAKX,UAAUa,IAjEpB,YAmECf,SAASN,GAAGsB,WAAWC,aAAaJ,KAAMb,SAASN,GAAGwB,aACtDL,KAAKM,MAAMC,OAAS,UACpBP,KAAKM,MAAME,OAAS,OACpBR,KAAKM,MAAMG,YAAc,MACzBT,KAAKU,iBAAiB,QAASvB,SAASJ,aAExCN,IAAIkC,MAAM,mEAAoE,iBAKnFxB"}