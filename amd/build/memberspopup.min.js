define ("mod_grouptool/memberspopup",["jquery","core/modal_factory","core/templates","core/url","core/str","core/log"],function(a,b,c,d,e,f){var g=new function Memberspopup(){this.showidnumber=!1;this.courseid=""};g.initializer=function(h){g.showidnumber=h.showidnumber;g.courseid=h.courseid;f.info("Initialize groupmembers JS!","mod_grouptool");if(!g.modal){g.modalpromise=b.create({type:b.types.MODAL,body:"..."})}e.get_string("groupmembers").done(function(b){f.info("Done loading strings...","mod_grouptool");g.modalpromise.done(function(e){f.info("Done preparing modal...","mod_grouptool");g.modal=e;a("#registration_form").on("click","span.memberstooltip > a",null,function(f){f.stopPropagation();f.preventDefault();var e=a(f.target),h=e.parents("form").data("statushelp"),i;try{i=e.data("absregs")}catch(a){i=[]}var j;try{j=e.data("gtregs")}catch(a){j=[]}var k;try{k=e.data("mregs")}catch(a){k=[]}var l;try{l=e.data("queued")}catch(a){l=[]}var m;try{m=b+": "+e.data("name")}catch(a){m=b}var n={courseid:g.courseid,showidnumber:g.showidnumber,profileurl:d.relativeUrl("/user/view.php?course="+g.courseid+"&id="),statushelp:h,absregs:i,gtregs:j,mregs:k,queued:l},o=c.render("mod_grouptool/groupmembers",n);o.done(function(a){g.modal.setTitle(m);g.modal.setBody(a);g.modal.show()}).fail(function(a){g.modal.setBody(a.message);g.modal.show()})})})}).fail(function(a){f.error("Error getting strings: "+a,"mod_grouptool")})};return g});
//# sourceMappingURL=memberspopup.min.js.map
