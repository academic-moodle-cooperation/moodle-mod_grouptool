/**
 * Javascript handling pop-over displaying group members
 *
 * @module   mod_grouptool/memberspopup
 * @author    Philipp Hager
 * @copyright 2014 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_grouptool/memberspopup",["jquery","core/modal_factory","core/templates","core/url","core/str","core/log"],(function($,ModalFactory,templates,url,str,log){var instance=new function(){this.showidnumber=!1,this.courseid=""};return instance.initializer=function(config){instance.showidnumber=config.showidnumber,instance.courseid=config.courseid,log.info("Initialize groupmembers JS!","mod_grouptool"),instance.modal||(instance.modalpromise=ModalFactory.create({type:ModalFactory.types.MODAL,body:"..."})),str.get_string("groupmembers").done((function(s){log.info("Done loading strings...","mod_grouptool"),instance.modalpromise.done((function(modal){log.info("Done preparing modal...","mod_grouptool"),instance.modal=modal,$("#registration_form").on("click","span.memberstooltip > a",null,(function(e){e.stopPropagation(),e.preventDefault();var absregs,gtregs,mregs,queued,name,element=$(e.target),statushelp=element.parents("form").data("statushelp");try{absregs=element.data("absregs")}catch(ex){absregs=[]}try{gtregs=element.data("gtregs")}catch(ex){gtregs=[]}try{mregs=element.data("mregs")}catch(ex){mregs=[]}try{queued=element.data("queued")}catch(ex){queued=[]}try{name=s+": "+element.data("name")}catch(ex){name=s}var context={courseid:instance.courseid,showidnumber:instance.showidnumber,profileurl:url.relativeUrl("/user/view.php?course="+instance.courseid+"&id="),statushelp:statushelp,absregs:absregs,gtregs:gtregs,mregs:mregs,queued:queued};templates.render("mod_grouptool/groupmembers",context).done((function(source){instance.modal.setTitle(name),instance.modal.setBody(source),instance.modal.show()})).fail((function(ex){instance.modal.setBody(ex.message),instance.modal.show()}))}))}))})).fail((function(ex){log.error("Error getting strings: "+ex,"mod_grouptool")}))},instance}));

//# sourceMappingURL=memberspopup.min.js.map