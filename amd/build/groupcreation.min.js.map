{"version":3,"file":"groupcreation.min.js","sources":["../src/groupcreation.js"],"sourcesContent":["// This file is part of mod_grouptool for Moodle - http://moodle.org/\n//\n// It is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// It is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JS handling insertion of tags for group names and displaying advanced elements if changed group creation mode requires some\n *\n * @module   mod_grouptool/groupcreation\n * @author    Philipp Hager\n * @copyright 2014 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_grouptool/groupcreation\n */\ndefine(['jquery', 'core/config', 'core/str', 'core/log'], function($, config, str, log) {\n    /**\n     * @contructor\n     * @alias module:mod_grouptool/groupcreation\n     */\n    var Groupcreation = function() {\n        this.SELECTORS = {\n            FIELDSETCONTAINSADVANCED: 'fieldset.containsadvancedelements',\n            DIVFITEMADVANCED: 'div.fitem.advanced',\n            DIVFCONTAINER: 'div.fcontainer',\n            MORELESSLINK: 'fieldset.containsadvancedelements .moreless-toggler',\n            MORELESSLINKONLY: '.moreless-toggler',\n            MODEINPUT: 'input[name=mode]:checked'\n        };\n        this.CSS = {\n            SHOW: 'show',\n            MORELESSACTIONS: 'moreless-actions',\n            MORELESSTOGGLER: 'moreless-toggler',\n            SHOWLESS: 'moreless-less'\n        };\n    };\n\n    /**\n     * Adds a tag\n     *\n     * @param {Event} e Event object\n     */\n    Groupcreation.prototype.addTag = function(e) {\n        log.info('Add tag...', 'grouptool');\n\n        var targetfield = $('input[name=namingscheme]');\n\n        e.preventDefault();\n\n        var node = $(e.target);\n\n        var tag = node.data('nametag');\n\n        var content = targetfield.val();\n        var caretPos = targetfield[0].selectionStart;\n\n        targetfield.val(content.substring(0, caretPos) + tag + content.substring(caretPos));\n\n        // And now restore focus and caret position!\n        targetfield.focus();\n        var postpos = caretPos + tag.length;\n        targetfield[0].selectionStart = postpos;\n        targetfield[0].selectionEnd = postpos;\n    };\n\n    var instance = new Groupcreation();\n\n    /**\n     * AMD initializer\n     */\n    instance.initializer = function() {\n        log.info('Initialise grouptool group creation js...', 'grouptool');\n        // Add JS-Eventhandler for each tag!\n        var nametag = $('[data-nametag]');\n        nametag.on('click', null, this, this.addTag);\n        nametag.css('cursor', 'pointer');\n    };\n\n    return instance;\n});\n"],"names":["define","$","config","str","log","Groupcreation","this","SELECTORS","FIELDSETCONTAINSADVANCED","DIVFITEMADVANCED","DIVFCONTAINER","MORELESSLINK","MORELESSLINKONLY","MODEINPUT","CSS","SHOW","MORELESSACTIONS","MORELESSTOGGLER","SHOWLESS","prototype","addTag","e","info","targetfield","preventDefault","tag","target","data","content","val","caretPos","selectionStart","substring","focus","postpos","length","selectionEnd","instance","initializer","nametag","on","css"],"mappings":";;;;;;;;AA2BAA,qCAAO,CAAC,SAAU,cAAe,WAAY,aAAa,SAASC,EAAGC,OAAQC,IAAKC,KAK/E,IAAIC,cAAgB,WAChBC,KAAKC,UAAY,CACbC,yBAA0B,oCAC1BC,iBAAkB,qBAClBC,cAAe,iBACfC,aAAc,sDACdC,iBAAkB,oBAClBC,UAAW,4BAEfP,KAAKQ,IAAM,CACPC,KAAM,OACNC,gBAAiB,mBACjBC,gBAAiB,mBACjBC,SAAU,kBASlBb,cAAcc,UAAUC,OAAS,SAASC,GACtCjB,IAAIkB,KAAK,aAAc,aAEvB,IAAIC,YAActB,EAAE,4BAEpBoB,EAAEG,iBAEF,IAEIC,IAFOxB,EAAEoB,EAAEK,QAEAC,KAAK,WAEhBC,QAAUL,YAAYM,MACtBC,SAAWP,YAAY,GAAGQ,eAE9BR,YAAYM,IAAID,QAAQI,UAAU,EAAGF,UAAYL,IAAMG,QAAQI,UAAUF,WAGzEP,YAAYU,QACZ,IAAIC,QAAUJ,SAAWL,IAAIU,OAC7BZ,YAAY,GAAGQ,eAAiBG,QAChCX,YAAY,GAAGa,aAAeF,SAGlC,IAAIG,SAAW,IAAIhC,cAanB,OARAgC,SAASC,YAAc,WACnBlC,IAAIkB,KAAK,4CAA6C,aAEtD,IAAIiB,QAAUtC,EAAE,kBAChBsC,QAAQC,GAAG,QAAS,KAAMlC,KAAMA,KAAKc,QACrCmB,QAAQE,IAAI,SAAU,YAGnBJ"}