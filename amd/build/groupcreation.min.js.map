{"version":3,"sources":["../src/groupcreation.js"],"names":["define","$","config","str","log","Groupcreation","SELECTORS","FIELDSETCONTAINSADVANCED","DIVFITEMADVANCED","DIVFCONTAINER","MORELESSLINK","MORELESSLINKONLY","MODEINPUT","CSS","SHOW","MORELESSACTIONS","MORELESSTOGGLER","SHOWLESS","prototype","addTag","e","info","targetfield","preventDefault","node","target","tag","data","content","val","caretPos","selectionStart","substring","focus","postpos","length","selectionEnd","instance","initializer","nametag","on","css"],"mappings":"AA2BAA,OAAM,+BAAC,CAAC,QAAD,CAAW,aAAX,CAA0B,UAA1B,CAAsC,UAAtC,CAAD,CAAoD,SAASC,CAAT,CAAYC,CAAZ,CAAoBC,CAApB,CAAyBC,CAAzB,CAA8B,CAKpF,GAAIC,CAAAA,CAAa,CAAG,UAAW,CAC3B,KAAKC,SAAL,CAAiB,CACbC,wBAAwB,CAAE,mCADb,CAEbC,gBAAgB,CAAE,oBAFL,CAGbC,aAAa,CAAE,gBAHF,CAIbC,YAAY,CAAE,qDAJD,CAKbC,gBAAgB,CAAE,mBALL,CAMbC,SAAS,CAAE,0BANE,CAAjB,CAQA,KAAKC,GAAL,CAAW,CACPC,IAAI,CAAE,MADC,CAEPC,eAAe,CAAE,kBAFV,CAGPC,eAAe,CAAE,kBAHV,CAIPC,QAAQ,CAAE,eAJH,CAMd,CAfD,CAsBAZ,CAAa,CAACa,SAAd,CAAwBC,MAAxB,CAAiC,SAASC,CAAT,CAAY,CACzChB,CAAG,CAACiB,IAAJ,CAAS,YAAT,CAAuB,WAAvB,EAEA,GAAIC,CAAAA,CAAW,CAAGrB,CAAC,CAAC,0BAAD,CAAnB,CAEAmB,CAAC,CAACG,cAAF,GALyC,GAOrCC,CAAAA,CAAI,CAAGvB,CAAC,CAACmB,CAAC,CAACK,MAAH,CAP6B,CASrCC,CAAG,CAAGF,CAAI,CAACG,IAAL,CAAU,SAAV,CAT+B,CAWrCC,CAAO,CAAGN,CAAW,CAACO,GAAZ,EAX2B,CAYrCC,CAAQ,CAAGR,CAAW,CAAC,CAAD,CAAX,CAAeS,cAZW,CAczCT,CAAW,CAACO,GAAZ,CAAgBD,CAAO,CAACI,SAAR,CAAkB,CAAlB,CAAqBF,CAArB,EAAiCJ,CAAjC,CAAuCE,CAAO,CAACI,SAAR,CAAkBF,CAAlB,CAAvD,EAGAR,CAAW,CAACW,KAAZ,GACA,GAAIC,CAAAA,CAAO,CAAGJ,CAAQ,CAAGJ,CAAG,CAACS,MAA7B,CACAb,CAAW,CAAC,CAAD,CAAX,CAAeS,cAAf,CAAgCG,CAAhC,CACAZ,CAAW,CAAC,CAAD,CAAX,CAAec,YAAf,CAA8BF,CACjC,CArBD,CAuBA,GAAIG,CAAAA,CAAQ,CAAG,GAAIhC,CAAAA,CAAnB,CAKAgC,CAAQ,CAACC,WAAT,CAAuB,UAAW,CAC9BlC,CAAG,CAACiB,IAAJ,CAAS,2CAAT,CAAsD,WAAtD,EAEA,GAAIkB,CAAAA,CAAO,CAAGtC,CAAC,CAAC,gBAAD,CAAf,CACAsC,CAAO,CAACC,EAAR,CAAW,OAAX,CAAoB,IAApB,CAA0B,IAA1B,CAAgC,KAAKrB,MAArC,EACAoB,CAAO,CAACE,GAAR,CAAY,QAAZ,CAAsB,SAAtB,CACH,CAND,CAQA,MAAOJ,CAAAA,CACV,CAhEK,CAAN","sourcesContent":["// This file is part of mod_grouptool for Moodle - http://moodle.org/\n//\n// It is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// It is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JS handling insertion of tags for group names and displaying advanced elements if changed group creation mode requires some\n *\n * @package   mod_grouptool\n * @author    Philipp Hager\n * @copyright 2014 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_grouptool/groupcreation\n */\ndefine(['jquery', 'core/config', 'core/str', 'core/log'], function($, config, str, log) {\n    /**\n     * @contructor\n     * @alias module:mod_grouptool/groupcreation\n     */\n    var Groupcreation = function() {\n        this.SELECTORS = {\n            FIELDSETCONTAINSADVANCED: 'fieldset.containsadvancedelements',\n            DIVFITEMADVANCED: 'div.fitem.advanced',\n            DIVFCONTAINER: 'div.fcontainer',\n            MORELESSLINK: 'fieldset.containsadvancedelements .moreless-toggler',\n            MORELESSLINKONLY: '.moreless-toggler',\n            MODEINPUT: 'input[name=mode]:checked'\n        };\n        this.CSS = {\n            SHOW: 'show',\n            MORELESSACTIONS: 'moreless-actions',\n            MORELESSTOGGLER: 'moreless-toggler',\n            SHOWLESS: 'moreless-less'\n        };\n    };\n\n    /**\n     * Adds a tag\n     *\n     * @param {Event} e Event object\n     */\n    Groupcreation.prototype.addTag = function(e) {\n        log.info('Add tag...', 'grouptool');\n\n        var targetfield = $('input[name=namingscheme]');\n\n        e.preventDefault();\n\n        var node = $(e.target);\n\n        var tag = node.data('nametag');\n\n        var content = targetfield.val();\n        var caretPos = targetfield[0].selectionStart;\n\n        targetfield.val(content.substring(0, caretPos) + tag + content.substring(caretPos));\n\n        // And now restore focus and caret position!\n        targetfield.focus();\n        var postpos = caretPos + tag.length;\n        targetfield[0].selectionStart = postpos;\n        targetfield[0].selectionEnd = postpos;\n    };\n\n    var instance = new Groupcreation();\n\n    /**\n     * AMD initializer\n     */\n    instance.initializer = function() {\n        log.info('Initialise grouptool group creation js...', 'grouptool');\n        // Add JS-Eventhandler for each tag!\n        var nametag = $('[data-nametag]');\n        nametag.on('click', null, this, this.addTag);\n        nametag.css('cursor', 'pointer');\n    };\n\n    return instance;\n});\n"],"file":"groupcreation.min.js"}