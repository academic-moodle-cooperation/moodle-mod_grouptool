{"version":3,"sources":["../src/filter.js"],"names":["define","$","config","log","Filter","baseurl","wwwroot","prototype","toogleUnoccupiedFilter","updatePrefs","toggle","setUserPreference","value","prop","cfg","method","url","data","sesskey","encodeURI","beforeSend","info","success","error","ajax","init","params","instance","change","filterunoccupied"],"mappings":"AA2BAA,OAAM,wBAAC,CAAC,QAAD,CAAW,aAAX,CAA0B,UAA1B,CAAD,CAAwC,SAASC,CAAT,CAAYC,CAAZ,CAAoBC,CAApB,CAAyB,CAEnE,GAAIC,CAAAA,CAAM,CAAG,UAAW,CACpB,KAAKC,OAAL,CAAeH,CAAM,CAACI,OAAP,CAAiB,2BACnC,CAFD,CAIAF,CAAM,CAACG,SAAP,CAAiBC,sBAAjB,CAA0C,UAA8B,IAApBC,CAAAA,CAAoB,2DACpER,CAAC,CAAC,aAAD,CAAD,CAAiBS,MAAjB,GACA,GAAID,CAAJ,CAAiB,CACb,KAAKE,iBAAL,EACH,CACJ,CALD,CAOAP,CAAM,CAACG,SAAP,CAAiBI,iBAAjB,CAAqC,UAAY,IAEzCC,CAAAA,CAAK,GAFoC,CAG7C,GAAI,KAAAX,CAAC,CAAC,mBAAD,CAAD,CAAuBY,IAAvB,CAA4B,SAA5B,CAAJ,CAAqD,CACjDD,CAAK,GACR,CACD,GAAIE,CAAAA,CAAG,CAAG,CACNC,MAAM,CAAE,KADF,CAENC,GAAG,CAAE,KAAKX,OAFJ,CAGNY,IAAI,CAAE,CACF,QAAWf,CAAM,CAACgB,OADhB,CAEF,KAAQC,SAAS,8BAFf,CAGF,MAASA,SAAS,CAACP,CAAD,CAHhB,CAHA,CAQNQ,UAAU,CAAE,qBAAW,CACnBjB,CAAG,CAACkB,IAAJ,CAAS,mDAAuCT,CAAhD,CAAuD,WAAvD,CACH,CAVK,CAWNU,OAAO,CAAE,kBAAW,CAChBnB,CAAG,CAACkB,IAAJ,CAAS,wBAAT,CAAmC,WAAnC,CACH,CAbK,CAcNE,KAAK,CAAE,gBAAW,CACdpB,CAAG,CAACoB,KAAJ,CAAU,4BAAV,CAAwC,WAAxC,CACH,CAhBK,CAAV,CAkBAtB,CAAC,CAACuB,IAAF,CAAOV,CAAP,CACH,CAzBD,CA2BA,MAAO,CAMHW,IAAI,CAAE,cAASC,CAAT,CAAiB,CACnB,GAAIC,CAAAA,CAAQ,CAAG,GAAIvB,CAAAA,CAAnB,CACAH,CAAC,CAAC,mBAAD,CAAD,CAAuB2B,MAAvB,CAA8B,UAAW,CACrCD,CAAQ,CAACnB,sBAAT,EACH,CAFD,EAGAL,CAAG,CAACkB,IAAJ,CAASK,CAAT,EACAvB,CAAG,CAACkB,IAAJ,CAASK,CAAM,CAACG,gBAAhB,EACA,GAAGH,CAAM,CAACG,gBAAV,CAA4B,CACxB5B,CAAC,CAAC,mBAAD,CAAD,CAAuBY,IAAvB,CAA4B,SAA5B,KACAc,CAAQ,CAACnB,sBAAT,IACH,CACJ,CAjBE,CAmBV,CA3DK,CAAN","sourcesContent":["// This file is part of mod_grouptool for Moodle - http://moodle.org/\n//\n// It is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// It is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for sortable groups-list\n *\n * @package   mod_grouptool\n * @author    Daniel Binder\n * @copyright 2020 Academic Moodle Cooperation {@link http://www.academic-moodle-cooperation.org}\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_grouptool/filter\n */\ndefine(['jquery', 'core/config', 'core/log'], function($, config, log) {\n\n    var Filter = function() {\n        this.baseurl = config.wwwroot + '/lib/ajax/setuserpref.php';\n    };\n\n    Filter.prototype.toogleUnoccupiedFilter = function (updatePrefs = true) {\n        $('.group-full').toggle();\n        if (updatePrefs) {\n            this.setUserPreference();\n        }\n    };\n\n    Filter.prototype.setUserPreference = function () {\n        var name = 'mod_grouptool_hideoccupied';\n        var value = false;\n        if ($('#filterunoccupied').prop('checked') === true) {\n            value = true;\n        }\n        var cfg = {\n            method: 'get',\n            url: this.baseurl,\n            data: {\n                'sesskey': config.sesskey,\n                'pref': encodeURI(name),\n                'value': encodeURI(value)\n            },\n            beforeSend: function() {\n                log.info('set user preference ' + name + ': ' + value, 'grouptool');\n            },\n            success: function() {\n                log.info('set user preference OK', 'grouptool');\n            },\n            error: function() {\n                log.error('set user preference FAILED', 'grouptool');\n            }\n        };\n        $.ajax(cfg);\n    };\n\n    return {\n        /**\n         * Initializer\n         *\n         * @param {object} params\n         */\n        init: function(params) {\n            var instance = new Filter();\n            $('#filterunoccupied').change(function() {\n                instance.toogleUnoccupiedFilter();\n            });\n            log.info(params);\n            log.info(params.filterunoccupied);\n            if(params.filterunoccupied) {\n                $('#filterunoccupied').prop('checked', true);\n                instance.toogleUnoccupiedFilter(false);\n            }\n        }\n    };\n});"],"file":"filter.min.js"}