define ("mod_grouptool/grading",["jquery","core/config","core/str","core/log"],function(a,b,c,d){var e=function(){this.contextid=0;this.lang="";this.SELECTORS={GROUPINGSELECT:"select[name=grouping]",GROUPSELECT:"select[name=filter]"}};e.prototype.updateGroups=function(c){var e=0;d.info("Update groups!","grouptool");e=a(c.data.SELECTORS.GROUPINGSELECT).val();if(0>e){e=0}var f=c.data.contextid,g={method:"get",url:b.wwwroot+"/mod/grouptool/groupinggroups_ajax.php",data:{groupingid:e,lang:b.lang,contextid:f},dataType:"json",beforeSend:function beforeSend(){d.info("Request groups for grouping "+e,"grouptool")},success:function success(b){if(!b.error){for(var e="",f=a(c.data.SELECTORS.GROUPSELECT).val(),g=0;g<b.length;g++){if(a(c.data.SELECTORS.GROUPSELECT).filter(" option[value=\""+b[g].id+"\"]")&&a(c.data.SELECTORS.GROUPSELECT).filter(" option[value=\""+b[g].id+"\"]").get("selected")){e+="\n<option value=\""+b[g].id+"\" selected=\"selected\">"+b[g].name+"</option>"}else{e+="\n<option value=\""+b[g].id+"\">"+b[g].name+"</option>"}}a(c.data.SELECTORS.GROUPSELECT).html(e);a(c.data.SELECTORS.GROUPSELECT).val(f)}else{d.error(b.error,"grouptool")}},error:function error(a,b){d.error(b,"grouptool")}};a.ajax(g)};var f=new e;f.initializer=function(b){f.contextid=b.contextid;a(this.SELECTORS.GROUPINGSELECT).on("change",null,this,f.updateGroups);var c=a("#grading_form"),d=c.find("input[name=\"selected[]\"]");c.on("click",".checkboxcontroller a.select_all",function(a){a.stopPropagation();a.preventDefault();d.prop("checked",!0)});c.on("click",".checkboxcontroller a.select_none",function(a){a.stopPropagation();a.preventDefault();d.prop("checked",!1)})};return f});
//# sourceMappingURL=grading.min.js.map
